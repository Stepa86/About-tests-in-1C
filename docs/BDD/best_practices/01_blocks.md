---
title: Блоки тестов
---

# Структура каталогов/блоки тестов

1. По каждой проверяемой функциональности **должен быть свой каталог** с тестами полностью независимый от других тестов. Этот каталог буду называть `блок тестов`.

    Одна функциональность - одна листьевая функциональная подсистема.

2. У каталога должно быть **короткое и понятное имя**, образованное от имени проверяемого функционала и цифровой префикс. Это и будет именем блока.
3. Для каждого блока должен быть **свой json** файл. В имени сборки должен быть указано имя каталога/блока.
4. Каждый фиче-файл в блоке **должен быть с цифровым префиксом**.

    Порядок запуска тестов определяется по сортировке по имени. Выбирать префиксы лучше с запасом и с учетом того, что могут появится новые тесты. Например, сделать нумерацию: 010, 020, 030, 040... Если понадобится добавить новый фиче-файл после 020, то ему можно присвоить префикс 025.

5. Тесты внутри блока должны разделяться на:
    - Тесты для наполнения **внешних данных** (номенклатура, контрагенты, точки доставки и т.д.). Это данные, которые являются внешними по отношению к текущему функционалу.
    - Тесты для наполнения **входящих данных** (заказы, заявки, распоряжения и т.д.). Это данные, которые являются частью текущего функционала
    - Тесты, **проверяющие работу функционала**. Отдельная подготовка НСИ и входящих данных в базе позволяет гонять тесты несколько раз, не разворачивая базу заново.

6. Блок должен быть коротким. Он должен выполнятся **не дольше 15 минут**. В идеале - 5 минут на блок.
7. Блок тестов **полностью самостоятельная и независимая** структура. Он должен запускаться с подготовленной базы и не ожидать, что перед ним будет выполнен какой то другой блок тестов.
8. Блок тестов должен быть **перезапускаемым**. Тесты должны быть написаны таким образом, чтобы результат прохождения тестов не менялся от количества перезапусков этого блока. Должен поддерживаться сценарий - запустили тест по блоку, упало на ошибке, поправили ошибку, обновили cf, запустили тесты с начала (данные остались от половины прошедшего блока) и они корректно отработали до ошибки и продолжили работу.
9. В конце блока **все сеансы клиентов** тестирования **должны быть завершены**. Между запуском блоков обычно выполняется удаление базы и подготовка новой. Открытые сеансы могут этому мешать, особенно если не сработало принудительное завершение сеансов средствами VA.
10. При начале тестов и при завершении в блоке следует **вызывать общие сценарии**. Сперва он может быть пустой, но потом в нем могут появиться шаги, применимые для всех блоков. Например, в сценарии "При начале блока тестов" могут быть шаги по установке заголовка приложения и установке времени начала. А в сценарии "При завершении блока тестов" - проверка на отсутствие ошибок в журнале регистрации и завершение сеанса Администратора.
